$(document).ready(function(){var t=function(){l=[],m=[],p++,s(p);for(var t=["green","red","yellow","blue"],n=0;n<p;n++){var i=Math.floor(Math.random()*t.length),o=t[i];l.push(o)}},n=function(){e();var t=$.map(l,function(t,n){var i=t,e=$.Deferred();return setTimeout(function(){$("#btn-"+i).addClass("btn-"+i+"-active"),o(i)},1200*(n+1)+1e3*n),setTimeout(function(){$("#btn-"+i).removeClass("btn-"+i+"-active"),e.resolve()},2200*(n+1)),e});$.when.apply($,t).then(function(){r()})},i=function(){$(".btn").on("click",function(){var i=function(t,n){var i=$.Deferred();return setTimeout(function(){$(t).addClass("btn-"+n+"-active"),o(n)},0),setTimeout(function(){$(t).removeClass("btn-"+n+"-active"),i.resolve()},450),i.promise()},s=function(t,n){return arr1String=t.join(),arr2String=n.join(),arr1String===arr2String},c=$(this).attr("id"),u=c.split("-").slice(-1)[0];i(this,u),m.push(u),l.length===m.length&&(s(l,m)?(e(),t(),n()):f?(e(),m=[],p=0,a("!!",function(){t(),n()})):(e(),m=[],a("!!",r)))})},o=function(t){"green"===t?$("#simon-audio1").trigger("play"):"red"===t?$("#simon-audio2").trigger("play"):"yellow"===t?$("#simon-audio3").trigger("play"):$("#simon-audio4").trigger("play")},e=function(){$("#board-mask").show()},r=function(){$("#board-mask").hide()},s=function(t){$("#lcd").text(t)},a=function(t,n){var i=function(){var n=$.Deferred();return setTimeout(function(){$("#lcd").text(t)},700),setTimeout(function(){$("#lcd").text("--")},1400),setTimeout(function(){$("#lcd").text(t)},2100),setTimeout(function(){$("#lcd").text("--")},2800),setTimeout(function(){$("#lcd").text(p),n.resolve()},3600),n.promise()},o=i();o.done(n)},c=function(){d?($("#btn-start > span").addClass("indicator-start-on"),$("#btn-start > span").removeClass("indicator-start-off")):($("#btn-start > span").addClass("indicator-start-off"),$("#btn-start > span").removeClass("indicator-start-on"))},u=function(){f?($("#btn-strict > span").addClass("indicator-strict-on"),$("#btn-strict > span").removeClass("indicator-strict-off")):($("#btn-strict > span").addClass("indicator-strict-off"),$("#btn-strict > span").removeClass("indicator-strict-on"))};$("#btn-start").on("click",function(){d?location.reload():(d=!0,c(),r(),t(),n(),i())}),$("#btn-strict").on("click",function(){f?(f=!1,u()):(f=!0,u())});var d=!1,f=!1,l=[],m=[],p=0;new Audio("../media/sounds/simonSound1.mp3"),new Audio("../media/sounds/simonSound2.mp3"),new Audio("../media/sounds/simonSound3.mp3"),new Audio("../media/sounds/simonSound4.mp3")});